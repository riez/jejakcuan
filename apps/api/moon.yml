$schema: 'https://moonrepo.dev/schemas/project.json'
language: 'rust'
type: 'application'
stack: 'backend'
tags:
  - 'rust'
  - 'api'

dependsOn:
  - 'core'

tasks:
  dev:
    command: 'cargo run'
    options:
      persistent: true

  build:
    command: 'cargo build --release'
    inputs:
      - 'src/**/*'
      - 'Cargo.toml'

  test:
    command: 'cargo test'
    inputs:
      - 'src/**/*'
      - 'Cargo.toml'

  lint:
    command: 'cargo clippy -- -D warnings'
    inputs:
      - 'src/**/*'

  fmt:
    command: 'cargo fmt --check'
    inputs:
      - 'src/**/*'
